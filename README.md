# üèÉ Project Run ‚Äî backend –±–µ–≥–æ–≤–æ–≥–æ —Ç—Ä–µ–∫–µ—Ä–∞

Backend-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è –±–µ–≥–æ–≤–æ–≥–æ —Ç—Ä–µ–∫–µ—Ä–∞ (REST API).
–ü–æ–∑–≤–æ–ª—è–µ—Ç –∞—Ç–ª–µ—Ç–∞–º –∑–∞–ø–∏—Å—ã–≤–∞—Ç—å –∑–∞–±–µ–≥–∏, –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å GPS-–∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã, —É—á–∞—Å—Ç–≤–æ–≤–∞—Ç—å –≤ —á–µ–ª–ª–µ–Ω–¥–∂–∞—Ö –∏ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å —Å —Ç—Ä–µ–Ω–µ—Ä–∞–º–∏.

–ü—Ä–æ–µ–∫—Ç —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –Ω–∞ **Django + Django REST Framework**.

---

## üöÄ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏: –∞—Ç–ª–µ—Ç—ã –∏ —Ç—Ä–µ–Ω–µ—Ä—ã
- —Å–æ–∑–¥–∞–Ω–∏–µ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–±–µ–≥–∞–º–∏
- —Å—Ç–∞—Ç—É—Å—ã –∑–∞–±–µ–≥–∞: `init`, `in_progress`, `finished`
- –ø—Ä–∏—ë–º –∏ —Ö—Ä–∞–Ω–µ–Ω–∏–µ GPS-–∫–æ–æ—Ä–¥–∏–Ω–∞—Ç –≤–æ –≤—Ä–µ–º—è –∑–∞–±–µ–≥–∞ (Position)
- –ø–æ–¥—Å—á—ë—Ç –∑–∞–≤–µ—Ä—à—ë–Ω–Ω—ã—Ö –∑–∞–±–µ–≥–æ–≤
- —á–µ–ª–ª–µ–Ω–¥–∂–∏:
  - ¬´–°–¥–µ–ª–∞–π 10 –∑–∞–±–µ–≥–æ–≤¬ª
  - ¬´–ü—Ä–æ–±–µ–≥–∏ 50 –∫–∏–ª–æ–º–µ—Ç—Ä–æ–≤¬ª
  - ¬´2 –∫–∏–ª–æ–º–µ—Ç—Ä–∞ –∑–∞ 10 –º–∏–Ω—É—Ç¬ª
- –ø–∞–≥–∏–Ω–∞—Ü–∏—è, —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è, —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞
- –ø–æ–¥–ø–∏—Å–∫–∞ –∞—Ç–ª–µ—Ç–æ–≤ –Ω–∞ —Ç—Ä–µ–Ω–µ—Ä–æ–≤
- —Ä–µ–π—Ç–∏–Ω–≥ —Ç—Ä–µ–Ω–µ—Ä–æ–≤
- –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ –¥–ª—è —Ç—Ä–µ–Ω–µ—Ä–∞
- –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ç–µ—Å—Ç—ã –∏ CI

---

## üß± –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ (–∫–ª—é—á–µ–≤—ã–µ —Å—É—â–Ω–æ—Å—Ç–∏)

- **User** ‚Äî –±–∞–∑–æ–≤—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
- **Athlete / Coach** ‚Äî —Ä–æ–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- **Run** ‚Äî –∑–∞–±–µ–≥ –∞—Ç–ª–µ—Ç–∞
- **Position** ‚Äî GPS-—Ç–æ—á–∫–∏ –∑–∞–±–µ–≥–∞
- **Challenge** ‚Äî —Å–∏—Å—Ç–µ–º–∞ —á–µ–ª–ª–µ–Ω–¥–∂–µ–π
- **Subscription / Rating** ‚Äî –ø–æ–¥–ø–∏—Å–∫–∏ –∏ –æ—Ü–µ–Ω–∫–∏ —Ç—Ä–µ–Ω–µ—Ä–æ–≤

---

## üõ† –ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

- Python 3.12
- Django 5.x
- Django REST Framework
- SQLite (–ª–æ–∫–∞–ª—å–Ω–æ), PostgreSQL (Docker/production)
- Poetry
- Pytest + pytest-django
- Ruff, Black
- Docker, Docker Compose
- GitHub Actions (CI)

---

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ñ–∞–π–ª `.env.example` –≤ `.env` –∏ –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è.


## ‚öôÔ∏è –ó–∞–ø—É—Å–∫ –ø—Ä–æ–µ–∫—Ç–∞ –ª–æ–∫–∞–ª—å–Ω–æ (Poetry)


### 1) –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏
```bash
poetry run python manage.py migrate --settings=project_run.settings.local
```

### 2) –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–µ—Ä
```bash
poetry run python manage.py runserver --settings=project_run.settings.local
```

API –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ –ø–æ –∞–¥—Ä–µ—Å—É:  
http://127.0.0.1:8000/

---

## üê≥ –ó–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ Docker

### 1) –°–æ–±—Ä–∞—Ç—å –∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
```bash
docker compose up --build
```

### 2) –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏ –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
```bash
docker compose exec web poetry run python manage.py migrate --settings=project_run.settings.local
```

–°–µ—Ä–≤–µ—Ä –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É:  
http://127.0.0.1:8000/

> –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ: –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –∏–º–µ–Ω–∞ —Å–µ—Ä–≤–∏—Å–æ–≤ (`web`, `db`) –∑–∞–≤–∏—Å—è—Ç –æ—Ç –≤–∞—à–µ–≥–æ `docker-compose.yml`.

---

## üß™ –¢–µ—Å—Ç—ã

–ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤ –ª–æ–∫–∞–ª—å–Ω–æ:
```bash
poetry run pytest
```

–¢–µ—Å—Ç—ã –ø–æ–∫—Ä—ã–≤–∞—é—Ç:
- –æ—Å–Ω–æ–≤–Ω—ã–µ API-—ç–Ω–¥–ø–æ–π–Ω—Ç—ã –ø—Ä–æ–µ–∫—Ç–∞
- —Å–æ–∑–¥–∞–Ω–∏–µ –∏ –ø–æ–ª—É—á–µ–Ω–∏–µ –∑–∞–±–µ–≥–æ–≤
- —Å–º–µ–Ω—É —Å—Ç–∞—Ç—É—Å–æ–≤ –∑–∞–±–µ–≥–∞
- —Ä–∞–±–æ—Ç—É –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç (Position)
- –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å API-–æ—Ç–≤–µ—Ç–æ–≤

–¢–µ—Å—Ç—ã —Ç–∞–∫–∂–µ —É—Å–ø–µ—à–Ω–æ –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è –≤–Ω—É—Ç—Ä–∏ Docker-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞.

---

## ü§ñ CI (GitHub Actions)

–í –ø—Ä–æ–µ–∫—Ç–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω CI —á–µ—Ä–µ–∑ GitHub Actions.

–ü—Ä–∏ –∫–∞–∂–¥–æ–º `push` –∏ `pull request` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
- –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è `ruff` (–ª–∏–Ω—Ç–µ—Ä)
- –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è `pytest`

Workflow —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω –≤:
```text
.github/workflows/ci.yml
```

---

## üì° –û—Å–Ω–æ–≤–Ω—ã–µ API —ç–Ω–¥–ø–æ–π–Ω—Ç—ã

### Company / meta
- `GET /api/company_details/`

### Users
- `GET /api/users/`

### Runs
- `GET /api/runs/`
- `POST /api/runs/{id}/start/`
- `POST /api/runs/{id}/stop/`

### Positions
- `GET /api/positions/?run={id}`

### Challenges
- `GET /api/challenges/`

### Coaches
- `POST /api/subscribe_to_coach/{coach_id}/`
- `POST /api/rate_coach/{coach_id}/`
- `GET /api/analytics_for_coach/{coach_id}/`

---

## üë§ –ê–≤—Ç–æ—Ä

**Denis Tarasov**

GitHub:  
https://github.com/Denchickus

